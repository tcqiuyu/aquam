{% extends "base.html" %}
{% load staticfiles %}

{% block header %}
<!-- D3 -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
{% endblock %}

{% block mainbody %}
<div class="container">
    <div class="jumbotron">
        <h2>Water Use Analyzer - Demo</h2>
        <p>This analyzer is an interactive tool designed to fit the user, in this case,
    	an operator or a water management company to anlayze their statistics of water,
    	current and historical to establish a baseline and a trend to improve their water
    	use scenarios significantly. This tool also provides the user to look at
    	Key Performance Indicators (KPIs) such as average horizontal length drilled,
    	average water used per well and bbls water used per horizontal foot,
    	on an annual comparison basis. </p>
    </div>
    
    <h3>Horizontal Wells</h3>
    
    <div id="table-container">
        {% include 'solutions/partial/water-use-table.html'%}
    </div>
    
    <hr>
    
    <div>
        {{ data }}
    </div>
    
    <hr>
    <h3>Analytics</h3>
    <div class="chart-container" style="with:100%">
        <div id="chart1" style="width:100%; height:400px">
        </div>
        <div id="chart2" style="width:100%; height:400px">
        </div>
        <div id="chart3" style="width:100%; height:400px">
        </div>
        <hr/>
    </div>
{% endblock %}

{% block footer %}
<script type="text/javascript">
    // histogram
	$(document).ready(function() {
		var _width = $("#chart1").width(),
		    _height = $("#chart1").height();
		var margin = {top:10, right:30, bottom:30, left:30},
		    width = _width - margin.left - margin.right,
		    height = _height - margin.top - margin.bottom;
        var x = d3.scale.ordinal().rangeBands([0, width]);
        var y = d3.scale.linear().range([height, 0]);
        var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom");
        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");
		var svg = d3.select("#chart1").append("svg")
			.attr("width", _width)
			.attr("height", _height)
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		d3.json("{% url 'water-use-json'%}", function(error, data) {
		    alert(data);
		});
	});
</script>
{% endblock %}

{% block footer2 %} {% endblock %}