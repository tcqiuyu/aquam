{% extends "base.html" %}
{% load staticfiles %}

{% block header %}
    <!--- Import jointjs --->
    {#    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/0.9.0/joint.min.js" charset="utf-8"></script>#}
    <script src="{% static 'js/joint.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/0.9.0/joint.min.css">

{% endblock %}

{% block mainbody %}
    <div id="demo"></div>
{% endblock %}

{% block footer %}
    <script id="text/javascript">
        var graph = new joint.dia.Graph;

        var paper = new joint.dia.Paper({
            el: $('#demo'),
            width: 1920,
            height: 600,
            model: graph,
            gridSize: 1,
            interactive: false
        });

        joint.shapes.custom = {};

        joint.shapes.custom.ElementLink = joint.shapes.basic.Rect.extend({
            markup: '<a><g class="rotatable"><g class="scalable"><rect/></g><text/></g></a>',
            defaults: joint.util.deepSupplement({
                type: 'custom.ElementLink'
            }, joint.shapes.basic.Rect.prototype.defaults)
        });

        joint.shapes.custom.ElementLabelLink = joint.shapes.basic.Rect.extend({
            // Note the `<a>` SVG element surrounding the rest of the markup.
            markup: '<g class="rotatable"><g class="scalable"><rect/></g><a><text/></a></g>',
            defaults: joint.util.deepSupplement({
                type: 'custom.ElementLabelLink'
            }, joint.shapes.basic.Rect.prototype.defaults)
        });

        var rect_1 = new joint.shapes.custom.ElementLink({
            position: {x: 380, y: 100},
            size: {width: 160, height: 80},
            attrs: {
                rect: {fill: '#2D69A6'},
                a: {'xlink:href': 'water-use-analyzer/demo/', 'xlink:show': 'new', cursor: 'pointer'},
                text: {text: 'Fresh Water\n   Source', fill: 'white', 'font-size': 22}
            }
        });

        var rect_2 = rect_1.clone();
        rect_2.translate(240, 160);
        rect_2.attr({
            text: {text: '  Drilling/\nFracturing'}
        });

        var rect_3 = rect_1.clone();
        rect_3.translate(0, 320);
        rect_3.attr({
            text: {text: ' Alternative\nSurface Use'}
        });

        var rect_4 = rect_2.clone();
        rect_4.translate(340);
        rect_4.attr({
            text: {text: '   Produced\nWater Storage'}
        });

        var rect_5 = rect_3.clone();
        rect_5.translate(420);
        rect_5.attr({
            text: {text: 'Treatment'}
        });

        var rect_6 = rect_4.clone();
        rect_6.translate(400);
        rect_6.attr({
            text: {text: 'Disposal'}
        });
        
        var link = new joint.dia.Link({
            source: {id: rect_1.id},
            target: {id: rect_2.id},
            mouseover: function(){
                alert('hello');
            }

        });

        graph.addCells([rect_1, rect_2, rect_3, rect_4, rect_5, rect_6, link]);
    </script>
{% endblock %}